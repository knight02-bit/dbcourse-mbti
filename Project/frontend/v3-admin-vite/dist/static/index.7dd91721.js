import{d as e,A as l,M as a,t,p as u,r as o,o as d,c as r,j as n,w as s,l as i,S as c,R as m,Q as v,a as p,G as f,P as b}from"./index.4a112d7b.js";const x={class:"app-container"},Q=f("注意: MBTI用来测试性格是有依据的, 建议不要轻易增删"),h=f("Delete"),g=f("新增题目"),_={class:"demo-drawer__content"},A={class:"example-block"},B={class:"demo-drawer__footer"},T=f("取消"),V=f("提交"),w=e({name:"index",setup(e){const f=l().roles,w=a([]);t((()=>{"student"==f[0]?m.alert("非管理员不可使用","WARN",{confirmButtonText:" ✔ "}):v({url:"/question",method:"get"}).then((e=>{w.value=e.data.questions}))}));const y=a([]),k="80px";let N;const S=a(!1),q=a(!1),U=u({Qtext:"",QAtext:"",QBtext:"",QTid:1,QAvalue:"",QBvalue:""}),C=u({QAtext:[{required:!0,message:"请输入A选项内容",trigger:"blur"}],QBtext:[{required:!0,message:"请输入B选项内容",trigger:"blur"}]}),I=()=>{"student"==f[0]?m.alert("非管理员不可使用","WARN",{confirmButtonText:" ✔ "}):S.value=!0},P=a([]),R=()=>{let e=!0;null==y.value[0]||null==y.value[1]?e=!1:0!=U.QAtext.length&&0!=U.QBtext.length||(e=!1),e?(P.value=[{Qid:0,Qtext:U.Qtext,QAtext:U.QAtext,QBtext:U.QBtext,QTid:U.QTid,QAvalue:y.value[0],QBvalue:y.value[1]}],P.value[0],v({url:"/question-add",method:"post",data:P.value[0]}).then((e=>{e.data.isSuccess?b({message:"新增问题成功",type:"success"}):b.error("新增问题失败")})),E.value.close()):m.alert("","🚩 Tip ",{message:"信息不全",confirmButtonText:"OK",dangerouslyUseHTMLString:!0})},E=a(),F=()=>{q.value||m.confirm("你想要提交吗?").then((()=>{q.value=!0,N=setTimeout((()=>{setTimeout((()=>{q.value=!1}),400)}),2e3)})).catch((()=>{}))},J=()=>{q.value=!1,S.value=!1,clearTimeout(N)},M=[{value:"E",label:"E",children:[{value:"I",label:"I"}]},{value:"I",label:"I",children:[{value:"E",label:"E"}]},{value:"S",label:"S",children:[{value:"N",label:"N"}]},{value:"N",label:"N",children:[{value:"S",label:"S"}]},{value:"T",label:"T",children:[{value:"F",label:"F"}]},{value:"F",label:"F",children:[{value:"T",label:"T"}]},{value:"J",label:"J",children:[{value:"P",label:"P"}]},{value:"P",label:"P",children:[{value:"J",label:"J"}]}];return(e,l)=>{const a=o("el-button"),t=o("center"),u=o("el-table-column"),f=o("el-table"),N=o("el-input"),P=o("el-form-item"),W=o("el-cascader"),j=o("el-form");return d(),r("div",x,[n(t,null,{default:s((()=>[n(a,null,{default:s((()=>[Q])),_:1})])),_:1}),n(f,{data:w.value,stripe:"",style:{width:"100%"}},{default:s((()=>[n(u,{prop:"Qid",label:"题标(唯一)"}),n(u,{prop:"Qtext",label:"题目"}),n(u,{prop:"QAtext",label:"A选项"}),n(u,{prop:"QAvalue",label:"特征权值"}),n(u,{prop:"QBtext",label:"A选项"}),n(u,{prop:"QBvalue",label:"特征权值"}),n(u,{label:"删除"},{default:s((e=>[n(a,{size:"large",type:"danger",onClick:l=>{return e.$index,a=e.row,void m.confirm("是否要删除 "+a.Qtext,"WARN",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{v({url:"/del-question",method:"delete",data:a}),b({type:"success",message:"删除成功"})})).catch((()=>{b({type:"info",message:"取消删除操作"})}));var a}},{default:s((()=>[h])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n(t,null,{default:s((()=>[n(a,{type:"success",onClick:I},{default:s((()=>[g])),_:1})])),_:1}),n(i(c),{ref_key:"drawerRef",ref:E,modelValue:S.value,"onUpdate:modelValue":l[4]||(l[4]=e=>S.value=e),title:"请填入相关信息","before-close":F,direction:"ltr","custom-class":"demo-drawer"},{default:s((()=>[p("div",_,[n(j,{model:U,rules:C,"status-icon":""},{default:s((()=>[n(P,{label:"题目(默认为空)",prop:"Qtext"},{default:s((()=>[n(N,{modelValue:U.Qtext,"onUpdate:modelValue":l[0]||(l[0]=e=>U.Qtext=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(P,{label:"A选项","label-width":k,prop:"QAtext"},{default:s((()=>[n(N,{modelValue:U.QAtext,"onUpdate:modelValue":l[1]||(l[1]=e=>U.QAtext=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(P,{label:"B选项","label-width":k,prop:"QBtext"},{default:s((()=>[n(N,{modelValue:U.QBtext,"onUpdate:modelValue":l[2]||(l[2]=e=>U.QBtext=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(P,{label:"","label-width":k},{default:s((()=>[p("div",A,[n(W,{modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=e=>y.value=e),options:M,expandTrigger:"hover"},null,8,["modelValue"])])])),_:1}),n(P,null,{default:s((()=>[n(t,null,{default:s((()=>[p("div",B,[n(a,{onClick:J},{default:s((()=>[T])),_:1}),n(a,{type:"primary",loading:q.value,onClick:R},{default:s((()=>[V])),_:1},8,["loading"])])])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])])}}});export{w as default};
