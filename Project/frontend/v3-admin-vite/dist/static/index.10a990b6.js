import{d as e,A as l,M as a,t,p as u,r as o,o as d,c as s,a as r,j as n,w as i,l as c,S as m,F as v,R as p,Q as f,P as x,G as Q}from"./index.533573e3.js";const b={class:"app-container"},h=Q("注意: MBTI用来测试性格是有依据的, 建议不要轻易增删"),g=Q("Delete"),_=Q("新增题目"),A={class:"demo-drawer__content"},B={class:"example-block"},T={class:"demo-drawer__footer"},V=Q("取消"),y=Q("提交"),w=e({name:"index",setup(e){const Q=l().roles,w=a([]);t((()=>{"student"==Q[0]?p.alert("非管理员不可使用","WARN",{confirmButtonText:" ✔ "}):(f({url:"/question",method:"get"}).then((e=>{w.value=e.data.questions})),x({message:"若无显示,请进行刷新",type:"success"}))}));const k=a([]),N="80px";let S;const q=a(!1),U=a(!1),C=u({Qtext:"",QAtext:"",QBtext:"",QTid:1,QAvalue:"",QBvalue:""}),F=u({QAtext:[{required:!0,message:"请输入A选项内容",trigger:"blur"}],QBtext:[{required:!0,message:"请输入B选项内容",trigger:"blur"}]}),I=()=>{"student"==Q[0]?p.alert("非管理员不可使用","WARN",{confirmButtonText:" ✔ "}):q.value=!0},P=a([]),R=()=>{let e=!0;null==k.value[0]||null==k.value[1]?e=!1:0!=C.QAtext.length&&0!=C.QBtext.length||(e=!1),e?(P.value=[{Qid:0,Qtext:C.Qtext,QAtext:C.QAtext,QBtext:C.QBtext,QTid:C.QTid,QAvalue:k.value[0],QBvalue:k.value[1]}],P.value[0],f({url:"/question-add",method:"post",data:P.value[0]}).then((e=>{e.data.isSuccess?x({message:"新增问题成功",type:"success"}):x.error("新增问题失败")})),E.value.close()):p.alert("","🚩 Tip ",{message:"信息不全",confirmButtonText:"OK",dangerouslyUseHTMLString:!0})},E=a(),J=()=>{U.value||p.confirm("你想要提交吗?").then((()=>{U.value=!0,S=setTimeout((()=>{setTimeout((()=>{U.value=!1}),400)}),2e3)})).catch((()=>{}))},M=()=>{U.value=!1,q.value=!1,clearTimeout(S)},W=[{value:"E",label:"E",children:[{value:"I",label:"I"}]},{value:"I",label:"I",children:[{value:"E",label:"E"}]},{value:"S",label:"S",children:[{value:"N",label:"N"}]},{value:"N",label:"N",children:[{value:"S",label:"S"}]},{value:"T",label:"T",children:[{value:"F",label:"F"}]},{value:"F",label:"F",children:[{value:"T",label:"T"}]},{value:"J",label:"J",children:[{value:"P",label:"P"}]},{value:"P",label:"P",children:[{value:"J",label:"J"}]}];return(e,l)=>{const a=o("el-button"),t=o("center"),u=o("el-table-column"),Q=o("el-table"),S=o("el-input"),P=o("el-form-item"),j=o("el-cascader"),z=o("el-form");return d(),s(v,null,[r("div",b,[n(t,null,{default:i((()=>[n(a,null,{default:i((()=>[h])),_:1})])),_:1}),n(Q,{data:w.value,stripe:"",style:{width:"100%"}},{default:i((()=>[n(u,{prop:"Qid",label:"题标(唯一)"}),n(u,{prop:"Qtext",label:"题目"}),n(u,{prop:"QAtext",label:"A选项"}),n(u,{prop:"QAvalue",label:"特征权值"}),n(u,{prop:"QBtext",label:"A选项"}),n(u,{prop:"QBvalue",label:"特征权值"}),n(u,{label:"删除"},{default:i((e=>[n(a,{size:"large",type:"danger",onClick:l=>{return e.$index,a=e.row,void p.confirm("是否要删除 "+a.Qtext,"WARN",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f({url:"/del-question",method:"delete",data:a}),x({type:"success",message:"删除成功"})})).catch((()=>{x({type:"info",message:"取消删除操作"})}));var a}},{default:i((()=>[g])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),n(t,null,{default:i((()=>[n(a,{type:"success",onClick:I},{default:i((()=>[_])),_:1})])),_:1}),n(c(m),{ref_key:"drawerRef",ref:E,modelValue:q.value,"onUpdate:modelValue":l[4]||(l[4]=e=>q.value=e),title:"请填入相关信息","before-close":J,direction:"ltr","custom-class":"demo-drawer"},{default:i((()=>[r("div",A,[n(z,{model:C,rules:F,"status-icon":""},{default:i((()=>[n(P,{label:"题目(默认为空)",prop:"Qtext"},{default:i((()=>[n(S,{modelValue:C.Qtext,"onUpdate:modelValue":l[0]||(l[0]=e=>C.Qtext=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(P,{label:"A选项","label-width":N,prop:"QAtext"},{default:i((()=>[n(S,{modelValue:C.QAtext,"onUpdate:modelValue":l[1]||(l[1]=e=>C.QAtext=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(P,{label:"B选项","label-width":N,prop:"QBtext"},{default:i((()=>[n(S,{modelValue:C.QBtext,"onUpdate:modelValue":l[2]||(l[2]=e=>C.QBtext=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(P,{label:"","label-width":N},{default:i((()=>[r("div",B,[n(j,{modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=e=>k.value=e),options:W,expandTrigger:"hover"},null,8,["modelValue"])])])),_:1}),n(P,null,{default:i((()=>[n(t,null,{default:i((()=>[r("div",T,[n(a,{onClick:M},{default:i((()=>[V])),_:1}),n(a,{type:"primary",loading:U.value,onClick:R},{default:i((()=>[y])),_:1},8,["loading"])])])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])],64)}}});export{w as default};
